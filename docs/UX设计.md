# UX设计文档

## 核心功能
**提供给用户一个角色卡库（需要用户自己文生图，或者图生图，一个角色卡有正面和背面），可以随时补充和调用**

## 用户类型分析

### 心血来潮的用户
- 创作的大概率是短篇漫画，或者几页漫画图
- 这里尽可能用prompt来做角色一致性和连贯性

### 长期用户
- 创作的大概率是中长篇漫画
- 用户第一次接触该产品，应提示用户上传自己创作的大纲
- 通过大纲生成故事简介、漫画封面(去对话框)、和角色卡

## 工作流程设计

前端做引导式，一个页面只出现一个内容：

1. **第一步：故事简介生成**
   - 提示用户上传故事大纲
   - 生成故事简介，不满意可以refresh或者自己edit
   - 这里需要prompt来做约束，生成高质量的故事简介（agent1）

2. **第二步：漫画封面生成**
   - 跳转下一个页面，根据故事简介生成合适的漫画封面
   - 也是需要prompt来做约束
   - 用户不满意可以抽卡刷新，这里做减法，不提供edit（agent2）

3. **第三步：角色卡生成**
   - 跳转下一个页面，提示用户输入文本或图片
   - 生成角色卡，存入库中
   - 不满意可以抽卡刷新，这里也需要prompt做质量约束（agent3）

4. **第四步：章节文本处理**
   - 用户上传1个章节或2个（上传txt或者是直接粘贴在前端）
   - 字数上限暂定1w
   - 章节会被分段成数个文本（每段文本大概在200~300汉字左右，英文不得超过600，过长注意力会涣散）（agent4）
   - 这里不提供edit，把prompt做的足够好我相信提炼的文本符合预期

5. **第五步：漫画生成流程**
   对于分段生成的文本，用户只能从第一段文本开始生成漫画，为保证剧情连贯性和人物一致性：

   5.1) **第一段文本处理**
   - 用户要能够看到第一段文本是什么
   - 提供给用户prompt和negative prompt可填
   - 也可上传草图、参考图

   5.2) **图片生成**
   - 用户生成一组图（默认4，可调到15）
   - 这一组图都是描述这段文本的画面
   - 一张图里有3-6个分镜

   5.3) **选择和确认**
   - 用户满意选择一张图进入第二段文本漫画的生成
   - 不满意则进行抽卡刷新

   5.4) **后续文本生成**
   - 第二段文本漫画的生成，需要参考上一张图的（保证连贯性和角色一致性）
   - 其他如上

   5.5) **后期调整**
   - 全部生成后，可对漫画进行微调（edit模型），或者直接跳过这步

   5.6) **新章节处理**
   - 对于用户再新上传的章节，需要参考上一篇漫画的最后2-3张图片

## 技术要求
- 所有数据都需要以json格式存储下来
- 引入随机性，调高temperature