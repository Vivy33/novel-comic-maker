## 整体思路 Overall Idea

----

通过提示词先让文本llm从小说情节中提炼出对应角色的性格特点，根据情节和对话推测其外貌特征并用若干关键词进行概括，以便图片生成llm生成对应的角色卡，用户也可通过edit模型对角色卡进行微调以满足自己的需求，角色卡完成后便可由图片生成llm作为每张漫画中的角色与文本llm从小说提炼出的情节，背景，人物情绪，对话等进行组合生成漫画，这种做法可以很好的避免一个问题：小说篇幅过长时，由于图像llm输入文本框限制，不得不将小说各部分分组进行生成，每次生成新图片都需要以前一次生成的图为参考，生成流程长了图片中的一些细微差异很有可能会被放大，导致最后的角色形象与刚开始的角色形象天差地别。

First, use a prompt to make the text LLM extract the personality traits of corresponding characters from the novel plot, then infer their appearance features based on the plot and dialogues and summarize them with several keywords. This is to enable the image-generation LLM to create corresponding character cards. Users can also fine-tune the character cards via the edit model to meet their own needs. Once the character cards are completed, the image-generation LLM can use them as the characters in each comic panel, and combine them with elements such as the plot, background, characters' emotions, and dialogues extracted from the novel by the text LLM to generate comics. This method can well avoid one problem: when the novel is too long, due to the text input limit of the image LLM, the novel has to be divided into groups by sections for generation. Each time a new image is generated, it needs to take the previously generated image as a reference. As the generation process becomes longer, some subtle differences in the images are likely to be amplified, resulting in a huge discrepancy between the final character image and the initial one.

----

分镜prompt：


### 【小说转漫画分段式分镜指令】

请基于提供的万字以内小说，完成以下任务：  
1. 将小说内容合理拆分为 **[X] 个连续部分**（X由用户指定，如8个部分，对应8页漫画），确保每部分情节连贯、逻辑完整，无关键信息割裂；  
2. 为每个部分生成“漫画分镜脚本”，包含足够细节支撑图像生成，同时控制文本长度适配图像LLM输入限制（避免冗长描述）。  


#### 一、分段原则（需严格遵循）
1. **情节完整性**：每部分对应一个“小单元剧情”（如“开端冲突→发展→小高潮→暂歇”中的一个节点），结尾可留轻微悬念但不中断核心动作；  
2. **节奏适配性**：按小说节奏分配内容，对话密集段可拆分更细，场景转换/动作戏可合并为一个部分；  
3. **信息均衡性**：每部分包含的角色、场景、对话量大致均衡，避免某部分仅1句对话或过度堆砌情节。  


#### 二、单部分分镜脚本结构（每个部分必须包含）
1. **部分编号**：如“Part 1/8”  
2. **核心剧情概括**（1句话）：说明本部分在整体故事中的作用（如“主角发现密室钥匙，与反派首次对峙”）  
3. **场景与氛围**：  
   - 具体地点（如“老图书馆3楼东侧，书架倾斜，地面积灰”）  
   - 时间与光影（如“黄昏，阳光从破窗斜射，形成光柱”）  
   - 整体氛围（如“紧张压抑，能听到钟表滴答声”）  
4. **出场角色**（关联角色卡特征）：  
   - 角色名称+关键外貌锚点（如“林夏：棕发高马尾，穿红色连帽衫，右手戴银色手表”）  
   - 角色初始状态（如“靠在书架上，手指无意识敲着书脊”）  
5. **分镜细节**（每部分含2-4个分镜，标注景别）：  
   - 分镜1（景别：如“中景”）：  
     - 动作：角色核心行为（如“林夏弯腰捡起地上的黄铜钥匙，钥匙链上挂着小铃铛”）  
     - 情绪与眼神：（如“惊讶，挑眉，视线聚焦钥匙，瞳孔微缩”）  
     - 对话气泡：（如“林夏：‘这是…地下室的钥匙？’”）（对话过长需精简为漫画式短句）  
   - 分镜2（景别：如“特写”）：  
     - 细节：（如“钥匙上的刻字‘1987’，林夏的指尖在刻字上摩挲”）  
     - 情绪延伸：（如“疑惑，眉头微蹙，视线从钥匙移向走廊深处”）  
   - （后续分镜按此逻辑补充，确保动作连贯、情绪递进）  
6. **转场提示**（仅最后一个分镜需标注）：如“下一部分：林夏握紧钥匙走向走廊尽头，门后传来脚步声”  


#### 三、关键约束（确保图像生成准确性）
1. **角色一致性**：所有角色描述必须关联其核心外貌特征（如发型、标志性服饰、配饰），眼神细节需具体（如“愤怒时眼角下拉，瞳孔收缩”“心虚时眼神躲闪，视线飘向地面”）；  
2. **对话适配性**：对话气泡内容需口语化、短句式，符合角色性格（如冲动角色用短句+感叹号，沉稳角色用长句+句号）；  
3. **分镜可行性**：避免无法视觉化的描述（如“他内心很纠结”需改为“他双手抓头发，眼神在两个选项间来回扫视”）；  
4. **长度控制**：每个部分的文本总长度200-400字（含所有分镜），优先保留“动作+眼神+对话”核心信息。  


#### 输出格式
```
【Part X/Y】  
核心剧情：[一句话概括]  
场景：[地点+时间+氛围]  
出场角色：[角色1：外貌锚点+状态；角色2：...]  
分镜1（景别：XX）：  
- 动作：[具体行为]  
- 情绪与眼神：[细节描述]  
- 对话：[角色名：“台词”]  
分镜2（景别：XX）：  
- ...  
转场提示：[下一部分衔接点]  
```

### 设计逻辑说明
1. **分段可控性**：通过“用户指定X值”确保拆分数量精准，避免图像LLM因输入过长被迫二次拆分；  
2. **角色锚定**：每个部分重复角色核心外貌特征，结合眼神细节强化图像一致性，从根本上避免“形象漂移”；  
3. **图像友好性**：分镜景别、动作拆解、对话精简均贴合漫画生产逻辑，降低图像LLM的理解成本，确保对话气泡位置、眼神方向等细节准确；  
4. **连贯性保障**：转场提示和“小单元剧情”设计确保各部分衔接自然，避免漫画页之间出现逻辑断层。  

可根据小说类型（如古风/科幻）补充风格化细节（如古风可加“衣袂飘动方向”，科幻可加“机械装置运作状态”）。


图片prompt生成prompt[可选]：

请根据这个模板或风格参照图加上对应分镜[]生成具体的图片prompt
# 通用漫画分镜图片生成Prompt模板
【漫画风格设定】：[此处填写风格要求，示例：黑白日式漫画风格，线条清晰锐利，阴影对比强烈；或彩色欧美漫画风格，色彩饱和度高，人物轮廓分明；或提供风格参考图：[可插入风格参考图链接/描述参考图特征]]

【分镜核心信息】：
1. **场景基础**：[插入分镜对应场景信息，示例：诺第留斯号平台，黄昏，海风呼啸，海面泛着灰蓝]
2. **出场角色**：[插入该分镜出场角色信息，示例：尼摩（黑胡子，穿深色制服，眼神炽热）；阿龙纳斯（戴圆框眼镜，穿学者装，手攥栏杆）]
3. **分镜参数**：
   - 景别：[插入景别，示例：全景/中景/特写]
   - 核心动作：[插入动作描述，示例：尼摩伸右手指向海面，左手按在船舷；阿龙纳斯凑近尼摩]
   - 情绪与眼神：[插入情绪眼神描述，示例：尼摩激动，瞳孔收缩，视线锁定远处船影；阿龙纳斯疑惑]
   - 对话气泡：[插入对话内容，示例：尼摩（低沉）："那是复仇号的残骸..."；无对话则填“无”]

【生成约束】：
- 角色形象：严格遵循角色外貌特征，确保同一角色在不同分镜中形象一致，眼神方向与视线焦点符合描述。
- 画面呈现：按景别要求构图，全景突出场景氛围，中景聚焦角色互动，特写强调关键细节；动作连贯自然，情绪通过面部表情、肢体姿态可视化呈现。
- 格式适配：对话气泡位置合理，字体风格匹配角色性格（如粗犷角色用粗体，沉稳角色用常规字体），整体画面符合漫画分镜排版逻辑。


### 模板使用说明
1. **信息填充**：将文本LLM生成的分镜中“场景”“出场角色”“景别”“动作”“情绪与眼神”“对话”等信息，对应填入模板的括号位置，删除无关内容（如无对话则删除对话相关描述）。
2. **风格灵活调整**：可根据需求在“漫画风格设定”处明确风格类型，或补充风格参考图信息，确保生成漫画风格统一。
3. **字数控制**：填充后的单分镜Prompt字数可控制在150字以内，若仍超限制，可进一步精简角色次要特征（如保留“尼摩黑胡子、深色制服”，暂删“眼神炽热”等情绪描述，优先保证外貌锚点）。


 
图片prompt：


