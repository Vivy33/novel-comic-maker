开发一个根据一篇小说生成相应漫画的应用。

请回答：
你计划将这个产品面向什么类型的用户？这些类型的用户他们面临什么样的痛点，你设想的用户故事是什么样呢？
你认为这个产品实现上的挑战是什么，你计划如何应对这些挑战？
你计划采纳哪家公司的哪个模型的 AIGC 功能？你对比了哪些，你为什么选择用该 API ？
你对这个产品有哪些未来规划中的功能？你为何觉得这些能力是重要的？
请开发以上应用。要求不能调用第三方的 agent 能力，只需允许调用 LLM、各类 AIGC 模型和语音 TTS 能力。同时针对以上 1-4 点，请把你的思考整理成文档，作为作品的说明一并提交。

用户价值：产品目标合理性、产品设计合理性、功能丰富度、是否符合用户需求
技术质量：架构设计（设计思路的清晰度与合理性、可维护性可扩展性）、代码质量（健壮度-代码逻辑、代码规范、可复用性与可读性）等

## 项目设计

核心
**所有东西都要强调，Human in the loop，ai生成都可以调整、修改、预览完整的漫画（preview）**
**抽卡困难，生成了不符合用户预期的图片，频繁抽卡，需要减少抽卡成本，比如引入动作编辑、画风滤镜、人物一致性**
**文本剧情连贯性，前情提要**
**封面和简介**
**不熟悉画画的用户，快速上手创作漫画**

1.用户是谁？
专业用户(长期或专业画漫画的用户)
业余用户(心血来潮)
网络写手、签约作者没有时间和精力来处理

2.质量保证
为了解决抽卡效率，一次可以批量生成，引入随机性（调高温度，默认温度调高>=0.7）0-1 不发散到全发散
用户可以edit生成的图片
大体上符合预期：微调(AI PS:qwen image edit、nano banana)
非常不符合预期：方向对了，细节、风格不满足，调整prompt或手工编辑对应的文本(抽卡)
对应一些核心剧情，插入已经画好的图（用户上传自己画的）或者是 用户手工整理的文本(qwen-image-edit、nano banana做PS、doubao seedream做生成)
场景化、风格，提供模板(男女频、热血漫、推理漫、治愈/致郁漫)
PS:做拼接：人物、场景合成

3.workflow
生成封面和简介
大纲生成主角团的人物画像、剧情背景
每一个新章节需要加上之前的summary，避免跑题(memory + context engineering)
1w字对应20页漫画，用户可配，多少页为一个章节
分段生成文本（生成多份不同的大纲，不需要react，没有绝对正确错误之分，给用户更多的选择），summary生成预览图，分段文本再生成章节中的漫画图片
保证连贯性，需要有前情回顾或者上一个章节的最后几页漫画贴过来
每个章节的主角，需要风格一致，把主角的图片上传进去，避免偷换主角

4.选型
选合适的模型降低成本，这个场景下更偏向一次推理，多次访问
统计token花销
summary
前情提要summary < 分段生成文本 < 本章summary
qwen-image-edit、nano banana做PS、动作设计
doubao seedream、stepfun做生成

5.UI UX
web平台大概做什么样，需要手画草图
废案要做历史管理，每次生成都记录下来，根据时间线可查

6.roadmap
声音(辨识度，连贯，统一)，录入声音，生成模板
动态漫画
Wan2、阶跃、seedance
提供素材库功能，向量数据库，向量检索素材库
mad调温度生成多份不同的输出，彼此讨论并整理最终的输出（reAct（reAct跑mad循环））
封面图和预览图需要彩漫
提供一个上传图片接口，可以分析图片生成几段短篇小说

TODO：
**选2篇小说**很重要，必须是大家熟悉的，可以大胆
考虑出海，得有一篇西方的（西游记相关题材、西方文学冰与火之歌-权力的游戏），一篇国内的（东南亚市场可选三国、琼瑶剧）
可以去电视剧扣图片，callback PS，动作设计（火柴人），场景拼接
2篇小说，不同风格，一个短篇一个中长篇
调prompt -> 生成符合预期的为止，跑通流程，**记录完整的操作日志** 上传github example 
注册几个账号，火山，阿里云，阶跃，硅基流动，快手
讲清楚为什么不选国外的模型，但是今天都在做出海
出海可以选择gpt、gemini，清楚能力边界
需要测下模型能处理多少文本
这决定了让模型压缩到多少
所以文本切片压缩可能得做好几轮
这里的关键是json结构化输出
需要一些fewshot让模型按照你的格式返回数据，减少你解析成本

存储方案
图片可以存在oss或本地文件，设计好目录结构
数据库里存的是对话和文件路径
以上全部pass，采用下述存储方案
文件目录系统 (无数据库，无向量数据库，无OSS)
抛弃sqlite，也不要表，用文件目录替代，文件目录用特定格式，比如
  split_text.history、text_to_image.history，里面丢个json就好了
  2025.10.20_19.57，这是目录命名